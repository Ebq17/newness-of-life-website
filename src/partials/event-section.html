<!-- Veranstaltungen Section: Displays upcoming events -->
<section id="veranstaltungen" class="content-section">
    <div class="container">
        <h2 id="veranstaltungen-title" data-cms-field="events_section.title" data-cms-label="Titel">{{ homepage.events_section.title || 'Veranstaltungen' }}</h2>
        <if condition="homepage.events_section.subtitle">
            <p class="section-subtitle" data-cms-field="events_section.subtitle" data-cms-label="Untertitel">{{ homepage.events_section.subtitle }}</p>
        </if>

        <!-- Featured Events (wenn vorhanden) -->
        <if condition="featuredEvents && featuredEvents.length > 0">
            <div class="featured-events">
                <each loop="event in featuredEvents">
                    <div class="featured-event-card">
                        <if condition="event.image">
                            <img src="{{ event.image }}" alt="{{ event.title }}" class="featured-event-image" loading="lazy">
                        </if>
                        <div class="featured-event-content">
                            <span class="event-label" style="background-color: {{ event.category_color }};">
                                <i class="fa-solid {{ event.category_icon }}"></i> {{ event.category_name || 'Event' }}
                            </span>
                            <h3>{{ event.title }}</h3>
                            <p class="event-date"><i class="fa-solid fa-calendar"></i> {{ event.date_de }}</p>
                            <if condition="event.location">
                                <p class="event-location"><i class="fa-solid fa-map-marker-alt"></i> {{ event.location }}</p>
                            </if>
                            <if condition="event.description">
                                <p class="event-description">{{ event.description }}</p>
                            </if>
                            <if condition="event.link">
                                <a href="{{ event.link }}" class="btn-primary" target="_blank">Mehr erfahren</a>
                            </if>
                        </div>
                    </div>
                </each>
            </div>
        </if>

        <!-- Regular Events Grid -->
        <div class="event-grid" id="event-grid">
            <!-- Statische Event-Karten (regelmäßige Treffen) -->
            <div class="event-card">
                <img src="images/EJC.png" alt="Gottesdienst" class="event-image" loading="lazy">
                <div class="event-card-content">
                    <span class="event-label">Gemeinschaft</span>
                    <h3>Gottesdienst</h3>
                    <p class="event-subtitle">{{ settings.service_times.main_service.day || 'Jeden Sonntag' }} um {{ settings.service_times.main_service.time || '14:00' }} Uhr</p>
                </div>
            </div>
            <div class="event-card">
                <img src="images/Gebete.jpg" alt="Gebetsabend" class="event-image" loading="lazy">
                <div class="event-card-content">
                    <span class="event-label">Gebet</span>
                    <h3>Gebetsabend</h3>
                    <p class="event-subtitle">Jeden Freitag um 19:00 Uhr</p>
                </div>
            </div>
            <div class="event-card">
                <img src="images/biblestunde_jugend.jpg" alt="Bibelstudium" class="event-image" loading="lazy">
                <div class="event-card-content">
                    <span class="event-label">Bildung</span>
                    <h3>Bibelstudium</h3>
                    <p class="event-subtitle">Jeden Montag & Mittwoch um 19:00 Uhr</p>
                </div>
            </div>
        </div>

        <!-- Kommende Events aus dem CMS -->
        <if condition="homepageEvents && homepageEvents.length > 0">
            <h3 class="upcoming-events-title" style="margin-top: 40px;" data-cms-field="events_section.show_count" data-cms-label="Anzahl Events">Kommende Veranstaltungen</h3>
            <div class="upcoming-events-list" data-cms-field="events_section.show_count" data-cms-label="Anzahl Events">
                <each loop="event in homepageEvents">
                    <div class="upcoming-event-item" data-cms-role="upcoming-event-item">
                        <div class="event-date-badge">
                            <span class="event-day">{{ new Date(event.date).getDate() }}</span>
                            <span class="event-month">{{ new Date(event.date).toLocaleString('de-DE', { month: 'short' }) }}</span>
                        </div>
                        <div class="event-info">
                            <h4>{{ event.title }}</h4>
                            <p class="event-time"><i class="fa-solid fa-clock"></i> {{ event.date_de }}</p>
                            <if condition="event.location">
                                <p class="event-location"><i class="fa-solid fa-map-marker-alt"></i> {{ event.location }}</p>
                            </if>
                        </div>
                        <if condition="event.link">
                            <a href="{{ event.link }}" class="event-link" target="_blank"><i class="fa-solid fa-arrow-right"></i></a>
                        </if>
                    </div>
                </each>
            </div>
        </if>

        <!-- Button to navigate to the full Veranstaltungen page -->
        <div style="text-align: center; margin-top: 40px;">
            <a href="veranstaltungen.html" class="btn btn-primary" aria-label="Alle Veranstaltungen anzeigen">
                Alle Veranstaltungen
            </a>
        </div>
    </div>
</section>
